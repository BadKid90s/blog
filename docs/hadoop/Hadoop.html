<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hadoop | BadKid90s的个人博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/44721378?s=64&amp;v=4">
    <script language="javascript" type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/blog/js/MouseClickEffect.js"></script>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.2059898c.css" as="style"><link rel="preload" href="/blog/assets/js/app.90949fa6.js" as="script"><link rel="preload" href="/blog/assets/js/6.046367ea.js" as="script"><link rel="preload" href="/blog/assets/js/1.cdc513ed.js" as="script"><link rel="preload" href="/blog/assets/js/7.f8aa44ea.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.74c9e7f1.js"><link rel="prefetch" href="/blog/assets/js/11.886e0201.js"><link rel="prefetch" href="/blog/assets/js/12.ca758726.js"><link rel="prefetch" href="/blog/assets/js/13.5f599ef3.js"><link rel="prefetch" href="/blog/assets/js/14.3187c372.js"><link rel="prefetch" href="/blog/assets/js/15.e713d0c2.js"><link rel="prefetch" href="/blog/assets/js/16.c8e95ed3.js"><link rel="prefetch" href="/blog/assets/js/17.bc3349f8.js"><link rel="prefetch" href="/blog/assets/js/18.5fc327e9.js"><link rel="prefetch" href="/blog/assets/js/19.73a5c6d8.js"><link rel="prefetch" href="/blog/assets/js/20.d4ee2619.js"><link rel="prefetch" href="/blog/assets/js/21.b6d1e7f6.js"><link rel="prefetch" href="/blog/assets/js/22.f5cb648e.js"><link rel="prefetch" href="/blog/assets/js/23.007afb6f.js"><link rel="prefetch" href="/blog/assets/js/24.9e354a03.js"><link rel="prefetch" href="/blog/assets/js/25.e39f0284.js"><link rel="prefetch" href="/blog/assets/js/26.11ce0db9.js"><link rel="prefetch" href="/blog/assets/js/27.286eaa2e.js"><link rel="prefetch" href="/blog/assets/js/28.d8eee8c3.js"><link rel="prefetch" href="/blog/assets/js/29.09b215c5.js"><link rel="prefetch" href="/blog/assets/js/3.1cdd0199.js"><link rel="prefetch" href="/blog/assets/js/30.dd26abf5.js"><link rel="prefetch" href="/blog/assets/js/31.6d127640.js"><link rel="prefetch" href="/blog/assets/js/32.1cf73fc4.js"><link rel="prefetch" href="/blog/assets/js/33.3169d124.js"><link rel="prefetch" href="/blog/assets/js/34.ad49a374.js"><link rel="prefetch" href="/blog/assets/js/35.2c9f22c1.js"><link rel="prefetch" href="/blog/assets/js/36.b2d6c7a5.js"><link rel="prefetch" href="/blog/assets/js/37.ffd8244e.js"><link rel="prefetch" href="/blog/assets/js/38.5ff57850.js"><link rel="prefetch" href="/blog/assets/js/39.be22f7dc.js"><link rel="prefetch" href="/blog/assets/js/4.e59eeb46.js"><link rel="prefetch" href="/blog/assets/js/40.3dd45f3d.js"><link rel="prefetch" href="/blog/assets/js/5.a44d2cd5.js"><link rel="prefetch" href="/blog/assets/js/8.77a36604.js"><link rel="prefetch" href="/blog/assets/js/9.20aa6505.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.2059898c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>BadKid90s的个人博客</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>wangruiyu</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2023
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="BadKid90s的个人博客" class="logo"> <span class="site-name">BadKid90s的个人博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  随意一点的主页
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  莫名其妙的时间轴
</a></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  小标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      大分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/HTTP/" class="nav-link"><i class="undefined"></i>
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/SpringBoot/" class="nav-link"><i class="undefined"></i>
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Docker/" class="nav-link"><i class="undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/JAVA/" class="nav-link"><i class="undefined"></i>
  JAVA
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/ElasticSearch/" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Hadoop/" class="nav-link"><i class="undefined"></i>
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Netty/" class="nav-link"><i class="undefined"></i>
  Netty
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      很厉害的文章
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/docs/netty/" class="nav-link"><i class="undefined"></i>
  Netty
</a></li><li class="dropdown-item"><!----> <a href="/blog/docs/es/" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我吧
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/BadKid90s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="https://avatars.githubusercontent.com/u/44721378?v=4" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    wangruiyu
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>29</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>8</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  随意一点的主页
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  莫名其妙的时间轴
</a></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  小标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      大分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/HTTP/" class="nav-link"><i class="undefined"></i>
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/SpringBoot/" class="nav-link"><i class="undefined"></i>
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Docker/" class="nav-link"><i class="undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/JAVA/" class="nav-link"><i class="undefined"></i>
  JAVA
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/ElasticSearch/" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Hadoop/" class="nav-link"><i class="undefined"></i>
  Hadoop
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/Netty/" class="nav-link"><i class="undefined"></i>
  Netty
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      很厉害的文章
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/docs/netty/" class="nav-link"><i class="undefined"></i>
  Netty
</a></li><li class="dropdown-item"><!----> <a href="/blog/docs/es/" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我吧
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/BadKid90s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Hadoop</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>wangruiyu</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2023
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Hadoop</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>wangruiyu</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2023/2/21</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Hadoop</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="hadoop是什么"><a href="#hadoop是什么" class="header-anchor">#</a> Hadoop是什么</h2> <ol><li>hadoop是一个Aoache基金会所开发的分布式系统基础架构 。</li> <li>主要解决，海量数据的存储和海量数据的分析计算问题。</li> <li>广义上来说，Hadoop通常是指一个更广泛的概念——Hadoop生态圈。</li></ol> <h2 id="hadoop发展史"><a href="#hadoop发展史" class="header-anchor">#</a> Hadoop发展史</h2> <h3 id="lucene"><a href="#lucene" class="header-anchor">#</a> Lucene</h3> <h3 id="论文"><a href="#论文" class="header-anchor">#</a> 论文</h3> <h4 id="gfs-hdfs"><a href="#gfs-hdfs" class="header-anchor">#</a> GFS--&gt;HDFS</h4> <h4 id="map-reduce-mr"><a href="#map-reduce-mr" class="header-anchor">#</a> Map-Reduce--&gt;MR</h4> <h4 id="bigtable-hbase"><a href="#bigtable-hbase" class="header-anchor">#</a> BigTable--&gt;HBase</h4> <h2 id="hadoop三大发行版本"><a href="#hadoop三大发行版本" class="header-anchor">#</a> Hadoop三大发行版本</h2> <h3 id="apache"><a href="#apache" class="header-anchor">#</a> Apache</h3> <p>最原始，最基本的版本，对于入门学习较好</p> <h3 id="cloudera"><a href="#cloudera" class="header-anchor">#</a> Cloudera</h3> <p>在大型互联网企业中用的较多</p> <h3 id="hortonworks"><a href="#hortonworks" class="header-anchor">#</a> Hortonworks</h3> <p>文档较好</p> <h2 id="hadoop的优势-4高"><a href="#hadoop的优势-4高" class="header-anchor">#</a> Hadoop的优势（4高）</h2> <ol><li>高可靠：Hadoop底层维护了多个数据副本，所以即使Hadoop某个计算或存储出现故障，也不会导致数据丢失。</li> <li>高扩展性：在集群建分配任务数据，可方便的扩展数以千计的节点。</li> <li>高效性：在Mao-Reduce 的思想下，Hadoop是并行工作的，以加快任务处理速度。</li> <li>高容错性：能够自动将失败的任务重新分配。</li></ol> <h2 id="hadoop组成"><a href="#hadoop组成" class="header-anchor">#</a> Hadoop组成</h2> <h3 id="_1-x-与2-x"><a href="#_1-x-与2-x" class="header-anchor">#</a> 1.x 与2.x</h3> <p><img src="/blog/assets/img/image-20200820213620752.c68d1db2.png" alt="image-20200820213620752"></p> <h3 id="hdfs架构概念"><a href="#hdfs架构概念" class="header-anchor">#</a> HDFS架构概念</h3> <h4 id="_1-namenode-nn"><a href="#_1-namenode-nn" class="header-anchor">#</a> 1.NameNode (nn)</h4> <p>存储额文件的元数据，如文件名，文件目录结构，文件属性（生成时间，副本数，文件权限），以及每个文件的块列表和块所在的DataNode 等。</p> <h4 id="_2-datanode-dn"><a href="#_2-datanode-dn" class="header-anchor">#</a> 2.DataNode (dn)</h4> <p>在本地文件系统存储文件块数据，以及块数据的校验和。</p> <h4 id="_3-secondary-namenode-2nn"><a href="#_3-secondary-namenode-2nn" class="header-anchor">#</a> 3.Secondary NameNode (2nn)</h4> <p>用来监控HDFS状态的辅助后台程序，每隔一段时间获取HDFS元数据的快照。</p> <h3 id="yarn-架构概念"><a href="#yarn-架构概念" class="header-anchor">#</a> YARN 架构概念</h3> <h4 id="resourcemanage-rm-主要作用"><a href="#resourcemanage-rm-主要作用" class="header-anchor">#</a> ResourceManage(RM)主要作用</h4> <ul><li>处理客户请求</li> <li>监控NodeManage</li> <li>启动或监控ApplicationMaster</li> <li>资源的调度与分配</li></ul> <h4 id="nodemanage-nm-主要作用"><a href="#nodemanage-nm-主要作用" class="header-anchor">#</a> NodeManage(NM)主要作用</h4> <ul><li>管理单个节点上的资源</li> <li>处理来自ResourceManage的命令</li> <li>处理来自ApplicationMaster的命令</li></ul> <h4 id="applicationmaster-am-主要作用"><a href="#applicationmaster-am-主要作用" class="header-anchor">#</a> ApplicationMaster(AM)主要作用</h4> <ul><li>负责数据的切分</li> <li>为应用程序申请资源并分配给内部的任务</li> <li>任务的监控与容错</li></ul> <h4 id="container"><a href="#container" class="header-anchor">#</a> Container</h4> <ul><li>Container是YARN中的资源抽象，他封装了某个节点上的多维资源，如内存，CPU,磁盘，网络等。</li></ul> <h3 id="mapreduce架构概述"><a href="#mapreduce架构概述" class="header-anchor">#</a> MapReduce架构概述</h3> <p>MapReduce 将计算过程分为两个阶段：map 和 Reduce</p> <ol><li>Map 阶段并行处理输入数据</li> <li>Reduce阶段对Map结果进行汇总</li></ol> <h2 id="大数据计数生态体系"><a href="#大数据计数生态体系" class="header-anchor">#</a> 大数据计数生态体系</h2> <p><img src="/blog/assets/img/image-20200820224123902.c796fe02.png" alt="image-20200820224123902"></p> <h2 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h2> <h3 id="_1-准备虚拟机"><a href="#_1-准备虚拟机" class="header-anchor">#</a> 1.准备虚拟机</h3> <h3 id="_2-安装jdk"><a href="#_2-安装jdk" class="header-anchor">#</a> 2.安装JDK</h3> <h3 id="_3-安装hadoop"><a href="#_3-安装hadoop" class="header-anchor">#</a> 3.安装Hadoop</h3> <ul><li><p>解压</p></li> <li><p>配置环境变量</p> <p>在 <code>/etc/profile</code>文件的最后加</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/usr/local/hadoop-3.2.1
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/sbin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用配置生效</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">source</span> /ect/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="_4-hadoop目录结构"><a href="#_4-hadoop目录结构" class="header-anchor">#</a> 4.Hadoop目录结构</h3> <ul><li><p><strong>bin</strong></p> <p>存放对Hadoop相关服务（HDFS,YARN）进行操作的脚本</p></li> <li><p><strong>etc</strong></p> <p>Hadoop的配置文件目录</p></li> <li><p><strong>lib</strong></p> <p>存放Hadoop的本地库（对数据进行压缩解压的功能）</p></li> <li><p><strong>sbin</strong></p> <p>存放启动或停止Hadoop相关服务的脚本</p></li> <li><p><strong>share</strong></p> <p>存放Hadoop的依赖jar包，文档，和官方案例。</p></li></ul> <h3 id="_5-hadoop官网手册"><a href="#_5-hadoop官网手册" class="header-anchor">#</a> 5.Hadoop官网手册</h3> <p>Hadoop官方网站：https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html</p> <h2 id="hadoop运行模式"><a href="#hadoop运行模式" class="header-anchor">#</a> Hadoop运行模式</h2> <p>Hadoop运行模式包括：</p> <p>本地模式、伪分布式模式以及完全分布式模式。</p> <h3 id="本地运行模式"><a href="#本地运行模式" class="header-anchor">#</a> 本地运行模式</h3> <h4 id="官方grep案例"><a href="#官方grep案例" class="header-anchor">#</a> 官方Grep案例</h4> <p>1.创建在hadoop-3.2.1文件下面创建一个input文件夹</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> input
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.将Hadoop的xml配置文件复制到input</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">cp</span>  etc/hadoop/*.xml  input
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3.执行share目录下的MapReduce程序</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hadoop	jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar <span class="token function">grep</span> input  output  <span class="token string">'dfs[a-z.]+'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>4.查看输出结果</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span>  output/*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="官方wordcount案例"><a href="#官方wordcount案例" class="header-anchor">#</a> 官方WordCount案例</h4> <p>1.创建在hadoop-3.2.1文件下面创建一个wcinput文件夹</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> wcinput
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.在wcinput文件下创建一个wc.input文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> wcinput

$ touchwc.input
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>3.编辑wc.input文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">vim</span>  wc.input
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在文件中输入如下内容</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>hadoopyarn
hadoopmapreduce
atguigu
atguigu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>保存退出：：wq</p> <p>4.回到Hadoop目录</p> <p>5.执行程序</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar wordcount wcinput wcoutput
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>6.查看结果</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">cat</span> wcoutput /part-r-00000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>atguigu2
hadoop2
mapreduce1
yarn1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="伪分布式运行模式"><a href="#伪分布式运行模式" class="header-anchor">#</a> 伪分布式运行模式</h3> <h4 id="启动hdfs并运行mapreduce程序"><a href="#启动hdfs并运行mapreduce程序" class="header-anchor">#</a> 启动HDFS并运行MapReduce程序</h4> <h5 id="_1-分析"><a href="#_1-分析" class="header-anchor">#</a> 1.分析</h5> <p>（1）配置集群
（2）启动、测试集群增、删、查
（3）执行WordCount案例</p> <h5 id="_2-执行步骤"><a href="#_2-执行步骤" class="header-anchor">#</a> 2.执行步骤</h5> <h6 id="_1-配置集群"><a href="#_1-配置集群" class="header-anchor">#</a> （1）配置集群</h6> <p>进入Hadoop的etc目录</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> ./etc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>配置：hadoop-env.sh</p> <p>Linux系统中获取JDK的安装路径：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token variable">$JAVA_HOME</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/usr/local/jdk1.8.0_121
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改JAVA_HOME路径：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/jdk1.8.0_121
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>配置：core-site.xml</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--指定HDFS中NameNode的地址--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://localhost:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--指定Hadoop运行时产生文件的存储目录--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/usr/local/hadoop-3.2.1/data/tmp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>配置：hdfs-site.xml</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--指定HDFS副本的数量--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h6 id="_2-设置无密码ssh"><a href="#_2-设置无密码ssh" class="header-anchor">#</a> （2）设置无密码SSH</h6> <ul><li><p>现在检查您是否可以在不使用密码的情况下SSH到本地主机：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> $ <span class="token function">ssh</span>  localhost
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果没有密码就无法SSH到本地主机</p></li> <li><p>请执行以下命令</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ ssh-keygen -t rsa -P<span class="token string">''</span>-f〜/ .ssh / id_rsa 
$ cat〜/ .ssh / id_rsa.pub <span class="token operator">&gt;&gt;</span>〜/ .ssh / authorized_keys 
$ <span class="token function">chmod</span> 0600〜/ .ssh / authorized_keys
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h6 id="_3-执行"><a href="#_3-执行" class="header-anchor">#</a> （3）执行</h6> <ul><li><p>格式化文件系统</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs namenode -format
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>启动NameNode守护程序和DataNode守护程序：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ ./sbin/start-dfs.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>启动报错</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@iZ2zednzb8iugz3kgudq9bZ hadoop-3.2.1<span class="token punctuation">]</span><span class="token comment"># ./sbin/stop-dfs.sh</span>
Stopping namenodes on <span class="token punctuation">[</span>localhost<span class="token punctuation">]</span>
ERROR: Attempting to operate on hdfs namenode as root
ERROR: but there is no HDFS_NAMENODE_USER defined. Aborting operation.
Stopping datanodes
ERROR: Attempting to operate on hdfs datanode as root
ERROR: but there is no HDFS_DATANODE_USER defined. Aborting operation.
Stopping secondary namenodes <span class="token punctuation">[</span>iZ2zednzb8iugz3kgudq9bZ<span class="token punctuation">]</span>
ERROR: Attempting to operate on hdfs secondarynamenode as root
ERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting operation.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>添加以下配置到 <code>hadoop-env.sh</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">HDFS_DATANODE_USER</span><span class="token operator">=</span>root  
<span class="token assign-left variable">HDFS_NAMENODE_USER</span><span class="token operator">=</span>root  
<span class="token assign-left variable">HDFS_SECONDARYNAMENODE_USER</span><span class="token operator">=</span>root 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>浏览Web界面以查找NameNode；默认情况下，它在以下位置可用：</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header-name keyword">http:</span>//localhost:9870/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>设置执行MapReduce作业所需的HDFS目录：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -mkdir /user/root
$ bin/hdfs dfs -mkdir /user/<span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>创建多层目录</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -mkdir -p  /user/wry
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/blog/assets/img/image-20200822090658863.655cd36d.png" alt="image-20200822090658863"></p> <ul><li>查看多级目录</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -ls -R /
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/blog/assets/img/image-20200822090905199.c39a4a52.png" alt="image-20200822090905199"></p></li> <li><p>将本地输入文件复制到分布式文件系统中：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -mkdir -p /user/wry/input
$ bin/hdfs dfs -put etc/hadoop/*.xml /user/wry/input
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/blog/assets/img/image-20200822091216510.07dc7e5f.png" alt="image-20200822091216510"></p> <p><img src="/blog/assets/img/image-20200822091335115.7ec4c086.png" alt="image-20200822091335115"></p></li> <li><p>运行提供的一些示例：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar <span class="token function">grep</span> /user/wry/input /user/wry/output <span class="token string">'dfs[a-z.]+'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/blog/assets/img/image-20200822091809558.c25dc91b.png" alt="image-20200822091809558"></p> <ul><li><p>查看文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -ls -r /user/wry/output
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看分布式文件系统上的输出文件：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -cat /user/wry/output/<span class="token operator">&lt;</span>文件名<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/blog/assets/img/image-20200822092048172.e813e4d2.png" alt="image-20200822092048172"></p> <p>or</p></li> <li><p>检查输出文件：将输出文件从分布式文件系统复制到本地文件系统并检查它们：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -get /user/wry/output /usr/local/wryoutput 
$ <span class="token function">cat</span> /usr/local/wryoutput/*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/blog/assets/img/image-20200822093255847.a9f37873.png" alt="image-20200822093255847"></p></li></ul></li> <li><p>完成后，使用以下命令停止守护进程：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/stop-dfs.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <blockquote><p><strong>格式化NameNode 时要注意</strong></p> <p>1.先停止进程</p> <p>2.删除data 、log文件</p> <p>3.执行格式化命令</p></blockquote> <blockquote><p><strong>为什么不能一直 格式化NameNode</strong></p> <p>格式化NameNode，会产生新的集群Id,导致NameNode和DataNode的集群Id不一致，集群找不到以往的数据，所以，，格式化NameNode时，一定要先删除data数据和log日志，然后再格式化NameNode。</p></blockquote> <p><img src="/blog/assets/img/image-20200822094801817.265644f9.png" alt="image-20200822094801817"></p> <h4 id="启动yarn并运行mapreduce程序"><a href="#启动yarn并运行mapreduce程序" class="header-anchor">#</a> 启动YARN并运行MapReduce程序</h4> <h5 id="_1-分析-2"><a href="#_1-分析-2" class="header-anchor">#</a> 1.分析</h5> <p>（1）配置集群在YARN上运行MR
（2）启动、测试集群增、删、查
（3）在YARN上执行WordCount案例</p> <h5 id="_2-执行步骤-2"><a href="#_2-执行步骤-2" class="header-anchor">#</a> 2.执行步骤</h5> <h6 id="_1-配置集群-2"><a href="#_1-配置集群-2" class="header-anchor">#</a> （1）配置集群</h6> <p>配置<code>etc/hadoop/mapred-site.xml</code>:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--用于指定执行MapReduce作业的运行时框架。可以是local、classic 或yarn之一 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- MR应用程序的类路径 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.application.classpath<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>配置<code>etc/hadoop/yarn-site.xml</code>:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--指Reduce 获取数据的方式--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--yarn运行的环境--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.env-whitelist<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span> 		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--指定YARN的ResourceManager的地址--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>0.0.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>启动</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/start-yarn.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动报错</p> <p><img src="/blog/assets/img/image-20200822100056038.54ef1a32.png" alt="image-20200822100056038"></p> <p>配置<code>etc/hadoop/hadoop-env.sh</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">YARN_RESOURCEMANAGER_USER</span><span class="token operator">=</span>root
<span class="token builtin class-name">export</span> <span class="token assign-left variable">YARN_NODEMANAGER_USER</span><span class="token operator">=</span>root
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/blog/assets/img/image-20200822102024933.0ffc5716.png" alt="image-20200822102024933"></p> <p><img src="data:image/png;base64,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" alt="image-20200822102108817"></p> <p>浏览ResourceManager的web界面；默认情况下，它位于：</p> <p>ResourceManager - <code>http://localhost:8088/</code></p> <p><img src="/blog/assets/img/image-20200822111645219.e3602e19.png" alt="image-20200822111645219"></p> <p>运行一个job</p> <ul><li>拷贝文件到hadoop 目录</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -put wcinput/wc.input  /user/wry/wcinput
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>运行</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar wordcount /user/wry/wcinput /user/wry/wcoutput
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hadoop dfs -ls -r /user/wry/wcoutput
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="配置历史服务器"><a href="#配置历史服务器" class="header-anchor">#</a> 配置历史服务器</h4> <p>为了查看程序的历史运行情况，需要配置一下历史服务器。具体配置步骤如下：</p> <ul><li>配置<code>etc/hadoop/mapred-site.xml</code></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--历史服务器端地址--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.jobhistory.address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>0.0.0.0:10020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--历史服务器web端地址--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.jobhistory.webapp.address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>0.0.0.0:19888<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><p>启动历史服务器</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/mr-jobhistory-daemon.sh starthistoryserver
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看历史服务器是否启动</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ jps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看JobHistory</p> <p>JobHistory -   http://hadoop101:19888/jobhistory</p></li></ul> <h4 id="配置日志的聚集"><a href="#配置日志的聚集" class="header-anchor">#</a> 配置日志的聚集</h4> <p>日志聚集概念：应用运行完成以后，将程序运行日志信息上传到HDFS系统上。
日志聚集功能好处：可以方便的查看到程序运行详情，方便开发调试。</p> <p>注意：开启日志聚集功能，需要重新启动NodeManager、ResourceManager和
HistoryManager。</p> <p>开启日志聚集功能具体步骤如下：</p> <ul><li><p>配置 <code>etc/hadoop/yarn-site.xml</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--日志聚集功能使能--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.log-aggregation-enable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--日志保留时间设置7天--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.log-aggregation.retain-seconds<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>604800<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>关闭NodeManager、ResourceManager和HistoryManager</p> <ul><li>关闭所有 包括 NodeManager、ResourceManager、Name Node、DataNode</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> $ sbin/stop-all.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>关闭  NodeManager、ResourceManager</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/stop-yarn.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>关闭  Name Node、DataNode</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/stop-dfs.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>关闭  HistoryManager</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/mr-jobhistory-daemon.sh stop historyserver 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>启动NodeManager、ResourceManager和HistoryManager</p></li> <li><p>删除HDFS上已经存在的输出文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hadoop dfs -rm -f -r /user/wry/wcoutput
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>执行WordCount程序</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar wordcount /user/wry/wcinput /user/wry/wcoutput
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看日志，如图所示</p> <p><img src="/blog/assets/img/image-20200822140954237.1d4270a6.png" alt="image-20200822140954237"></p> <p><img src="/blog/assets/img/image-20200822141013068.99133577.png" alt="image-20200822141013068"></p> <p><img src="/blog/assets/img/image-20200822141028970.949ed40e.png" alt="image-20200822141028970"></p></li></ul> <h4 id="配置文件说明"><a href="#配置文件说明" class="header-anchor">#</a> 配置文件说明</h4> <p>Hadoop配置文件分两类：默认配置文件和自定义配置文件，只有用户想修改某一默认
配置值时，才需要修改自定义配置文件，更改相应属性值。</p> <h5 id="_1-默认配置文件"><a href="#_1-默认配置文件" class="header-anchor">#</a> （1）默认配置文件：</h5> <p>要获取的默认文件文件存放在Hadoop的jar包中的位置</p> <table><thead><tr><th style="text-align:left;">配置文件名称</th> <th>默认配置所在的文件路径</th></tr></thead> <tbody><tr><td style="text-align:left;">core-default.xml</td> <td>hadoop-common-2.7.2.jar/core-default.xml</td></tr> <tr><td style="text-align:left;">hdfs-default.xml</td> <td>hadoop-hdfs-2.7.2.jar/hdfs-default.xml</td></tr> <tr><td style="text-align:left;">yarn-default.xml</td> <td>hadoop-yarn-common-2.7.2.jar/yarn-default.xml</td></tr> <tr><td style="text-align:left;">mapred-default.xml</td> <td>hadoop-mapreduce-client-core-2.7.2.jar/mapred-default.xml</td></tr></tbody></table> <h5 id="_2-自定义配置文件"><a href="#_2-自定义配置文件" class="header-anchor">#</a> （2）自定义配置文件：</h5> <p>core-site.xml、hdfs-site.xml、yarn-site.xml、mapred-site.xml四个配置文件存放在
$HADOOP_HOME/etc/hadoop这个路径上，用户可以根据项目需求重新进行修改配置。</p> <h3 id="完全分布式运行模式-开发重点"><a href="#完全分布式运行模式-开发重点" class="header-anchor">#</a> 完全分布式运行模式（开发重点）</h3> <h4 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h4> <p>1）准备3台客户机（关闭防火墙、静态ip、主机名称）
2）安装JDK
3）配置环境变量
4）安装Hadoop
5）配置环境变量
6）配置集群
7）单点启动
8）配置ssh
9）群起并测试集群</p> <h4 id="虚拟机准备"><a href="#虚拟机准备" class="header-anchor">#</a> 虚拟机准备</h4> <h5 id="_1-改ip地址"><a href="#_1-改ip地址" class="header-anchor">#</a> （1）改IP地址</h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">vim</span> /etc/sysconfig/network-scripts/ifcfg-ens33 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">TYPE</span><span class="token operator">=</span>Ethernet
<span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span>none
<span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span>no
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static		<span class="token comment">#改为static静态</span>
<span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span>yes
<span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span>no
<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span>yes
<span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span>yes
<span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span>yes
<span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span>no
<span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span>stable-privacy
<span class="token assign-left variable">NAME</span><span class="token operator">=</span>ens33
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>67b4d72d-1ff5-4e3e-a089-e1579700eba8
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>ens33
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes				<span class="token comment">#改为yes</span>

<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.100.102  <span class="token comment"># ip地址</span>
<span class="token assign-left variable">NETMASK</span><span class="token operator">=</span><span class="token number">255.255</span>.255.0   <span class="token comment">#子网掩码</span>
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token number">192.168</span>.100.1	<span class="token comment">#网关</span>
<span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token number">8.8</span>.8.8			<span class="token comment">#DNS</span>
<span class="token assign-left variable">DNS2</span><span class="token operator">=</span><span class="token number">223.6</span>.6.6

<span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token number">24</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h5 id="_2-改主机名"><a href="#_2-改主机名" class="header-anchor">#</a> （2）改主机名</h5> <p>不配置后期的数据节点可能会找不到。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">vim</span> /etc/hotos
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
<span class="token number">192.168</span>.100.102 hadoop102
<span class="token number">192.168</span>.100.103 hadoop103
<span class="token number">192.168</span>.100.104 hadoop104
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="编写集群分发脚本xsync"><a href="#编写集群分发脚本xsync" class="header-anchor">#</a> 编写集群分发脚本xsync</h4> <h5 id="_1-scp-securecopy-安全拷贝"><a href="#_1-scp-securecopy-安全拷贝" class="header-anchor">#</a> 1.scp（securecopy）安全拷贝</h5> <h6 id="_1-scp定义"><a href="#_1-scp定义" class="header-anchor">#</a> （1）scp定义：</h6> <p><code>scp</code>可以实现服务器与服务器之间的数据拷贝。（fromserver1toserver2）</p> <h6 id="_2-基本语法"><a href="#_2-基本语法" class="header-anchor">#</a> （2）基本语法</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">scp</span>		-r  	<span class="token variable">$pdir</span>/<span class="token variable">$fname</span>		<span class="token variable">$user</span>@hadoop<span class="token variable">$host</span><span class="token builtin class-name">:</span><span class="token variable">$pdir</span>/<span class="token variable">$fname</span>
命令	  递归	 要拷贝的文件路径	   名称目的用户@主机:目的路径/名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h6 id="_3-案例实操"><a href="#_3-案例实操" class="header-anchor">#</a> （3）案例实操</h6> <p>（a）在<code>192.168.100.101</code>上，将<code>192.168.100.101</code>中<code>/usr/local/software</code>目录下的软件拷贝到<code>192.168.100.102</code>上。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">scp</span> -r /usr/local/software/*  root@192.168.100.102:/usr/local/software
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（b）在<code>192.168.100.103</code>上，将<code>192.168.100.101</code>服务器上的<code>/usr/local/software</code>目录下的软件拷贝到
<code>192.168.100.103</code>上。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">scp</span> -r root@192.168.100.101:/usr/local/software/*  /usr/local/software/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（c）在<code>192.168.100.103</code>上操作将<code>192.168.100.101</code>中<code>/usr/local/software</code>目录下的软件拷贝到
<code>192.168.100.104</code>上。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">scp</span> -r root@192.168.100.101:/usr/local/software/*  root@192.168.100.104:/usr/local/software/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2-rsync远程同步工具"><a href="#_2-rsync远程同步工具" class="header-anchor">#</a> 2.rsync远程同步工具</h5> <p><code>rsync</code>主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点。</p> <p><strong><code>rsync</code>和<code>scp</code>区别：</strong></p> <p>用<code>rsync</code>做文件的复制要比<code>scp</code>的速度快，<code>rsync</code>只对差异文件做更新。<code>scp</code>是把所有文件都复制过去。</p> <h6 id="_1-基本语法"><a href="#_1-基本语法" class="header-anchor">#</a> （1）基本语法</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">rsync</span>	-rvl		<span class="token variable">$pdir</span>/<span class="token variable">$fname</span>			<span class="token variable">$user</span>@hadoop<span class="token variable">$host</span><span class="token builtin class-name">:</span><span class="token variable">$pdir</span>/<span class="token variable">$fname</span>
命令	  选项参数		要拷贝的文件路径/名称		目的用户@主机:目的路径/名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>选项参数说明</p> <table><thead><tr><th>选项</th> <th>功能</th></tr></thead> <tbody><tr><td>-r</td> <td>递归</td></tr> <tr><td>-v</td> <td>显示复制过程</td></tr> <tr><td>-l</td> <td>拷贝符号连接</td></tr></tbody></table> <h6 id="_2-案例实操"><a href="#_2-案例实操" class="header-anchor">#</a> （2）案例实操</h6> <p>（a）把<code>192.168.100.101</code>机器上的<code>/usr/local/software</code>目录同步到<code>192.168.100.102</code>服务器的root用户
下的<code>/usr/local/software</code>目录</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">rsync</span>  -rvl /usr/local/software/*  root@192.168.100.102:/usr/local/software/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_3-xsync集群分发脚本"><a href="#_3-xsync集群分发脚本" class="header-anchor">#</a> 3.xsync集群分发脚本</h5> <h6 id="_1-需求"><a href="#_1-需求" class="header-anchor">#</a> （1）需求</h6> <p>循环复制文件到所有节点的相同目录下</p> <h6 id="_2-需求分析"><a href="#_2-需求分析" class="header-anchor">#</a> （2）需求分析</h6> <p>（a）rsync命令原始拷贝：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">rsync</span> -rvl  /usr/local/program/*  root@192.168.100.103:/usr/local/program/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（b）期望脚本：
xsync要同步的文件名称
（c）说明：在<code>/home/&lt;用户名&gt;/bin</code>这个目录下存放的脚本，root用户可以在系统任何地方直接执行。</p> <h6 id="_3-脚本实现"><a href="#_3-脚本实现" class="header-anchor">#</a> （3）脚本实现</h6> <p>（a）在<code>/home/&lt;用户名&gt;/bin</code>目录下创建bin目录，并在bin目录下xsync创建文件，文件内容如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> /home/<span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span>
$ <span class="token function">mkdir</span> bin
$ <span class="token builtin class-name">cd</span> bin
$ <span class="token function">vim</span> xsync
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#1获取输入参数个数，如果没有参数，直接退出</span>
<span class="token assign-left variable">pcount</span><span class="token operator">=</span><span class="token variable">$#</span>
<span class="token keyword">if</span><span class="token variable"><span class="token punctuation">((</span>pcount<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">then</span>
<span class="token builtin class-name">echo</span> noargs<span class="token punctuation">;</span>
<span class="token builtin class-name">exit</span><span class="token punctuation">;</span>
<span class="token keyword">fi</span>
<span class="token comment">#2获取文件名称</span>
<span class="token assign-left variable">p1</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">fname</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">basename</span> $p1<span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span>  <span class="token assign-left variable">fname</span><span class="token operator">=</span><span class="token variable">$fname</span>
<span class="token comment">#3获取上级目录到绝对路径</span>
<span class="token assign-left variable">pdir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">cd</span> -P <span class="token punctuation">$(</span>dirname $p1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token assign-left variable">pdir</span><span class="token operator">=</span><span class="token variable">$pdir</span>
<span class="token comment">#4获取当前用户名称</span>
<span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">whoami</span><span class="token variable">`</span></span>
<span class="token comment">#5循环</span>
<span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>host<span class="token operator">=</span><span class="token number">103</span><span class="token punctuation">;</span>host<span class="token operator">&lt;</span><span class="token number">105</span><span class="token punctuation">;</span>host<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
<span class="token builtin class-name">echo</span> -------------------192.168.100.<span class="token variable">$host</span>--------------
<span class="token function">rsync</span> -rvl <span class="token variable">$pdir</span>/<span class="token variable">$fname</span>  <span class="token variable">$user</span>@192.168.100.<span class="token variable">$host</span><span class="token builtin class-name">:</span><span class="token variable">$pdir</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>（b）修改脚本xsync具有执行权限</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">chmod</span> <span class="token number">777</span> xsync
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（c）调用脚本形式：xsync文件名称</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ xsync  /home/<span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span>/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><strong>注意</strong>：</p> <p>如果将<code>xsync</code>放到<code>/home/&lt;用户名&gt;/bin</code>目录下仍然不能实现全局使用，</p> <p>可以将<code>xsync</code>移动到<code>/usr/local/bin</code>目录下。</p></blockquote> <h4 id="集群配置"><a href="#集群配置" class="header-anchor">#</a> 集群配置</h4> <h5 id="_1-集群部署规化"><a href="#_1-集群部署规化" class="header-anchor">#</a> 1.集群部署规化</h5> <table><thead><tr><th></th> <th style="text-align:left;">192.168.100.102 -hadoop102</th> <th>192.168.100.103-hadoop103</th> <th>192.168.100.104-hadoop104</th></tr></thead> <tbody><tr><td>HDFS</td> <td style="text-align:left;">NameNode <br> DataNode</td> <td><br>DataNode</td> <td>SecondaryNameNode <br>DataNode</td></tr> <tr><td>YARN</td> <td style="text-align:left;"><br>NodeManage</td> <td>ResourceManage  <br>NodeManage</td> <td><br>NodeManage</td></tr></tbody></table> <p>机器改IP</p> <h5 id="_2-配置集群"><a href="#_2-配置集群" class="header-anchor">#</a> 2.配置集群</h5> <h6 id="_1-核心配置文件"><a href="#_1-核心配置文件" class="header-anchor">#</a> （1）核心配置文件</h6> <p>在<code>192.168.100.102</code> 上</p> <p>配置<code>etc/hadoop/core-site.xml</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> /usr/local/program/hadoop3.2.1
$ <span class="token function">vim</span> etc/hadoop/core-site.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在该文件中编写如下配置</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--指定HDFS中NameNode的地址--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://192.168.100.102:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--指定Hadoop运行时产生文件的存储目录--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/usr/local/program/hadoop-3.2.1/data/tmp/hadoop-${user.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h6 id="_2-hdfs配置文件"><a href="#_2-hdfs配置文件" class="header-anchor">#</a> （2）HDFS配置文件</h6> <p>配置<code>etc/hadoop/hadoop-env.sh</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/program/jdk1.8 

<span class="token builtin class-name">export</span> <span class="token assign-left variable">HDFS_DATANODE_USER</span><span class="token operator">=</span>root  
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HDFS_NAMENODE_USER</span><span class="token operator">=</span>root  
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HDFS_SECONDARYNAMENODE_USER</span><span class="token operator">=</span>root 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>配置<code>etc/hadoop/hdfs-site.xml</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--指定Hadoop辅助名称节点主机配置--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.secondary.http-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>192.168.100.104:50090<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--指定HadoopNameNode的地址--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.http.address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>192.168.100.102:9870<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h6 id="_3-yarn配置文件"><a href="#_3-yarn配置文件" class="header-anchor">#</a> （3）YARN配置文件</h6> <p>一般在 shell中输入</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ hadoop  classpath
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后 这些输出 直接 粘贴到 yarn 的配置文件里 yarn-site.xml的属性 <name>yarn.application.classpath</name>赋值</p> <p>配置<code>etc/hadoop/hadoop-env.sh</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">YARN_RESOURCEMANAGER_USER</span><span class="token operator">=</span>root
<span class="token builtin class-name">export</span> <span class="token assign-left variable">YARN_NODEMANAGER_USER</span><span class="token operator">=</span>root
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>配置<code>etc/hadoop/yarn-site.xml</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--用于指定执行MapReduce作业的运行时框架。可以是local、classic 或yarn之一 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
<span class="token comment">&lt;!-- MR应用程序的类路径 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.application.classpath<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/usr/local/program/hadoop-3.2.1/etc/hadoop:/usr/local/program/hadoop-3.2.1/share/hadoop/common/lib/*:/usr/local/program/hadoop-3.2.1/share/hadoop/common/*:/usr/local/program/hadoop-3.2.1/share/hadoop/hdfs:/usr/local/program/hadoop-3.2.1/share/hadoop/hdfs/lib/*:/usr/local/program/hadoop-3.2.1/share/hadoop/hdfs/*:/usr/local/program/hadoop-3.2.1/share/hadoop/mapreduce/lib/*:/usr/local/program/hadoop-3.2.1/share/hadoop/mapreduce/*:/usr/local/program/hadoop-3.2.1/share/hadoop/yarn:/usr/local/program/hadoop-3.2.1/share/hadoop/yarn/lib/*:/usr/local/program/hadoop-3.2.1/share/hadoop/yarn/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--指定YARN的ResourceManager的地址--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>192.168.100.103<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services.mapreduce.shuffle.class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop.mapred.ShuffleHandler<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h6 id="_4-mapreduce配置文件"><a href="#_4-mapreduce配置文件" class="header-anchor">#</a> （4）MapReduce配置文件</h6> <p>配置<code>etc/hadoop/mapred-site.xml</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--指定MR运行在Yarn上--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- MR应用程序的类路径 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.application.classpath<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="_3-在集群上分发配置好的hadoop配置文件"><a href="#_3-在集群上分发配置好的hadoop配置文件" class="header-anchor">#</a> 3.在集群上分发配置好的Hadoop配置文件</h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ xsync ./etc/hadoop/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_4-查看文件分发情况"><a href="#_4-查看文件分发情况" class="header-anchor">#</a> 4.查看文件分发情况</h5> <h4 id="集群单点启动"><a href="#集群单点启动" class="header-anchor">#</a> 集群单点启动</h4> <p>（1）如果集群是第一次启动，需要格式化<code>NameNode</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$  bin/hdfs namenode -formart
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（2）在<code>192.168.100.102</code>上启动<code>NameNode</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/hadoop-daemon.sh  start namenode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（3）在<code>192.168.100.102</code>,<code>192.168.100.103</code>以及<code>192.168.100.104</code>上分别启动<code>DataNode</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/hadoop-daemon.sh  start datanode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（4）思考：每次都一个一个节点启动，如果节点数增加到1000个怎么办？
早上来了开始一个一个节点启动，到晚上下班刚好完成，下班？</p> <h4 id="ssh无密登录配置"><a href="#ssh无密登录配置" class="header-anchor">#</a> SSH无密登录配置</h4> <h5 id="_1-配置ssh"><a href="#_1-配置ssh" class="header-anchor">#</a> 1.配置ssh</h5> <p>（1）基本语法
ssh另一台电脑的ip地址
（2）ssh连接时出现Hostkeyverificationfailed的解决方法</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ssh</span>  <span class="token number">192.168</span>.1.103
Theauthenticityofhost<span class="token string">'192.168.1.103(192.168.1.103)'</span>can't
beestablished.
RSAkeyfingerprintis
cf:1e:de:d7:d0:4c:2d:98:60:b4:fd:ae:b1:2d:ad:06.
Areyousureyouwanttocontinueconnecting<span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>?
Hostkeyverificationfailed.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>（3）解决方案如下：直接输入yes</p> <h5 id="_2-无密钥配置"><a href="#_2-无密钥配置" class="header-anchor">#</a> 2.无密钥配置</h5> <p>（1）免密登录原理</p> <p><img src="/blog/assets/img/image-20200823180537869.bb9a61a8.png" alt="image-20200823180537869"></p> <p>（2）<code>192.168.100.102</code>生成公钥和私钥：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> /root/.ssh
$ ssh-keygen -t rsa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后敲（三个回车），就会生成两个文件id_rsa（私钥）、id_rsa.pub（公钥）</p> <p>（3）将公钥拷贝到要免密登录的目标机器上</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ ssh-copy-id <span class="token number">192.168</span>.100.102
$ ssh-copy-id <span class="token number">192.168</span>.100.103
$ ssh-copy-id <span class="token number">192.168</span>.100.104
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（4）<code>192.168.100.103</code>生成公钥和私钥,进行公钥拷贝到要免密登录的目标机器上</p> <h5 id="_3-ssh文件夹下-ssh-的文件功能解释"><a href="#_3-ssh文件夹下-ssh-的文件功能解释" class="header-anchor">#</a> 3.<code>.ssh</code>文件夹下（~/.ssh）的文件功能解释</h5> <table><thead><tr><th>known_hosts</th> <th>记录ssh访问过计算机的公钥(publickey)</th></tr></thead> <tbody><tr><td>id_rsa</td> <td>生成的私钥</td></tr> <tr><td>id_rsa.pub</td> <td>生成的公钥</td></tr> <tr><td>authorized_keys</td> <td>存放授权过得无密登录服务器公钥</td></tr></tbody></table> <h4 id="群起集群"><a href="#群起集群" class="header-anchor">#</a> 群起集群</h4> <h5 id="_1-配置etc-hadoop-workers"><a href="#_1-配置etc-hadoop-workers" class="header-anchor">#</a> 1.配置<code>etc/hadoop/workers</code></h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">vim</span> etc/hadoop/workers 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加以下节点</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">192.168</span>.100.102
<span class="token number">192.168</span>.100.103
<span class="token number">192.168</span>.100.104
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><h4 id="注意"><a href="#注意" class="header-anchor">#</a> 注意：</h4> <p>千万不要有多余的空格</p></blockquote> <h5 id="_2-启动集群"><a href="#_2-启动集群" class="header-anchor">#</a> 2.启动集群</h5> <h6 id="_1-如果集群是第一次启动"><a href="#_1-如果集群是第一次启动" class="header-anchor">#</a> （1）如果集群是第一次启动</h6> <p>需要格式化NameNode（注意格式化之前，一定要先停止上次启动的所有namenode和datanode进程，然后再删除data和log数据）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs namenode -format
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_2-启动hdfs"><a href="#_2-启动hdfs" class="header-anchor">#</a> （2）启动HDFS</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/start-dfs.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>jps</code>查看是否启动</p> <h6 id="_3-启动yarn"><a href="#_3-启动yarn" class="header-anchor">#</a> （3）启动<code>YARN</code></h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/start-yarn.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_3-web端查看secondarynamenode"><a href="#_3-web端查看secondarynamenode" class="header-anchor">#</a> （3）Web端查看<code>SecondaryNameNode</code></h6> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header-name keyword">http:</span>//192.168.100.102:9870/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_4-查看文件系统的基本数据"><a href="#_4-查看文件系统的基本数据" class="header-anchor">#</a> （4）查看文件系统的基本数据</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfsadmin -report
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意：</p> <p>NameNode和ResourceManger如果不是同一台机器，不能在NameNode上启动YARN，应该在ResouceManager所在的机器上启动YARN。</p></blockquote> <h5 id="_3-集群基本测试"><a href="#_3-集群基本测试" class="header-anchor">#</a> 3.集群基本测试</h5> <h6 id="_1-上传文件到集群"><a href="#_1-上传文件到集群" class="header-anchor">#</a> （1）上传文件到集群</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ bin/hdfs dfs -put  ./wcinput/wc.input  /user/wry/input
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_2-上传文件后查看文件存放在什么位置"><a href="#_2-上传文件后查看文件存放在什么位置" class="header-anchor">#</a> （2）上传文件后查看文件存放在什么位置</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">pwd</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/usr/local/program/hadoop-3.2.1/data/tmp/hadoop-root/dfs/data/current/BP-719430212-127.0.0.1-1598525636602/current/finalized/subdir0/subdir0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="集群启动-停止方式总结"><a href="#集群启动-停止方式总结" class="header-anchor">#</a> 集群启动/停止方式总结</h4> <h5 id="_1-各个服务组件逐一启动-停止"><a href="#_1-各个服务组件逐一启动-停止" class="header-anchor">#</a> 1.各个服务组件逐一启动/停止</h5> <h6 id="_1-分别启动-停止hdfs组件"><a href="#_1-分别启动-停止hdfs组件" class="header-anchor">#</a> （1）分别启动/停止HDFS组件</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/hadoop-daemon.sh start/stop  namenode/datanode/secondarynamenode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_2-启动-停止yarn"><a href="#_2-启动-停止yarn" class="header-anchor">#</a> （2）启动/停止YARN</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/yarn-daemon.sh  start/stop  resourcemanager/nodemanager
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2-各个模块分开启动-停止-配置ssh是前提-常用"><a href="#_2-各个模块分开启动-停止-配置ssh是前提-常用" class="header-anchor">#</a> 2.各个模块分开启动/停止（配置ssh是前提）常用</h5> <h6 id="_1-整体启动-停止hdfs"><a href="#_1-整体启动-停止hdfs" class="header-anchor">#</a> （1）整体启动/停止HDFS</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/start-dfs.sh/stop-dfs.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_2-整体启动-停止yarn"><a href="#_2-整体启动-停止yarn" class="header-anchor">#</a> （2）整体启动/停止YARN</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sbin/start-yarn.sh/stop-yarn.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="crontab定时任务设置"><a href="#crontab定时任务设置" class="header-anchor">#</a> crontab定时任务设置</h3> <h4 id="基本语法"><a href="#基本语法" class="header-anchor">#</a> 基本语法</h4> <p>crontab [选项]</p> <h4 id="选项说明"><a href="#选项说明" class="header-anchor">#</a> 选项说明</h4> <table><thead><tr><th>选项</th> <th>功能</th></tr></thead> <tbody><tr><td>-e</td> <td>编辑crontab 定时任务</td></tr> <tr><td>-l</td> <td>查询crontab任务</td></tr> <tr><td>-r</td> <td>删除当前用户所有的crontab 任务</td></tr></tbody></table> <h4 id="参数说明"><a href="#参数说明" class="header-anchor">#</a> 参数说明</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">crontab</span> -e
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_1-进入crontab编辑界面。会打开vim-编辑你的工作"><a href="#_1-进入crontab编辑界面。会打开vim-编辑你的工作" class="header-anchor">#</a> （1）进入crontab编辑界面。会打开vim 编辑你的工作</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>* * * * *  执行的任务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>项目</th> <th>含义</th> <th>范围</th></tr></thead> <tbody><tr><td>第一个“*”</td> <td>一小时当中的第几分钟</td> <td>0-59</td></tr> <tr><td>第二个“*”</td> <td>一天当中的第几小时</td> <td>0-23</td></tr> <tr><td>第三个“*”</td> <td>一月当中的第几天</td> <td>1-31</td></tr> <tr><td>第四个“*”</td> <td>一年当中的第几月</td> <td>1-12</td></tr> <tr><td>第五个“*”</td> <td>一周当中的星期几</td> <td>0-7（0和7都代表星期日）</td></tr></tbody></table> <h5 id="_2-特殊符合"><a href="#_2-特殊符合" class="header-anchor">#</a> （2）特殊符合</h5> <table><thead><tr><th>特殊符合</th> <th>含义</th></tr></thead> <tbody><tr><td>*</td> <td>代表任何时间。比如第一个“*”，就代表一小时中的每分钟都有执行一次</td></tr> <tr><td>，</td> <td>代表不连需的时间。比如&quot;0 8,12,16 * * *&quot; 命令，就代表在每天的8点0分，12点0分，16点0分都执行一次</td></tr> <tr><td>-</td> <td>代表连续的时间范围。比如&quot;0 5 * * 1-6&quot; ,就代表在周一到周六的凌晨5点0分执行命令</td></tr> <tr><td>*/n</td> <td>代表每个多久执行一次。比如&quot;*/10 * * * *&quot;,就代表没10分钟执行一次命令</td></tr></tbody></table> <h5 id="_3-特殊特定时间执行命令"><a href="#_3-特殊特定时间执行命令" class="header-anchor">#</a> （3）特殊特定时间执行命令</h5> <table><thead><tr><th>时间</th> <th>含义</th></tr></thead> <tbody><tr><td>45 22 * * *</td> <td>在22点45 分执行命令</td></tr> <tr><td>0 17 * * 1</td> <td>每周一的17点0分执行命令</td></tr> <tr><td>0 5 1,15 * *</td> <td>每月1号和15号的凌晨5点0分执行命令</td></tr> <tr><td>40 4 * * 1-5</td> <td>每周一到周五的凌晨4点40 分执行命令</td></tr> <tr><td>*/10 4 * * *</td> <td>每天的凌晨4点，没隔10分钟执行一次命令</td></tr> <tr><td>0 0 1,15 * 1</td> <td>每月1号和15号，每周一的0点0分都会执行命令。注意：星期几和几号最好不要同时出现，因为他们定义的都是天。</td></tr></tbody></table> <h5 id="_4-案例实操"><a href="#_4-案例实操" class="header-anchor">#</a> （4）案例实操</h5> <ul><li><p>每隔1分钟，向<code>/root/bailongma.txt</code>文件中添加一个11 的数字。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>*/1 * * * * /bin/echo <span class="token string">&quot;11&quot;</span> <span class="token operator">&gt;&gt;</span>/root/bailongma.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="集群时间同步"><a href="#集群时间同步" class="header-anchor">#</a> 集群时间同步</h3> <p>时间同步的方式：找一个机器，作为时间服务器，所有的机器与这台集群时间进行定时的同步，比如，每隔十分钟，同步一次时间。</p> <p><img src="/blog/assets/img/image-20200829223326519.781b34fd.png" alt="image-20200829223326519"></p> <h2 id="linux"><a href="#linux" class="header-anchor">#</a> Linux</h2> <h3 id="配置静态ip"><a href="#配置静态ip" class="header-anchor">#</a> 配置静态IP</h3> <h4 id="第一步-修改vmnet配置"><a href="#第一步-修改vmnet配置" class="header-anchor">#</a> 第一步：修改VMnet配置</h4> <p>在VMware里，依次点击”编辑“ - ”虚拟网络编辑器“，如下图，我选择的是NAT模式： 以下VMnet2为配置</p> <p><img src="https://img.jbzj.com/file_images/article/202001/2020011513342421.png" alt="在这里插入图片描述"></p> <p>其中子网ip随便写,子网掩码自己计算,如果不太熟悉就完全配置和我一样就行</p> <p>A类默认的子网掩码：255.0.0.0
B类默认的子网掩码：255.255.0.0
C类默认的子网掩码：255.255.255.0</p> <p>为了使用静态IP将: 使用本地DHCP服务将IP地址分配给虚拟机 取消(默认是选择状态)</p> <p>点击NAT设置</p> <p>将网关ip记住如下图,最后配置虚拟机ip文件所用</p> <p><img src="https://img.jbzj.com/file_images/article/202001/2020011513342422.png" alt="Alt"></p> <h4 id="第二步-进入虚拟机"><a href="#第二步-进入虚拟机" class="header-anchor">#</a> 第二步：进入虚拟机</h4> <p>以root权限登陆centos8并编辑vi /etc/sysconfig/network-scripts/ifcfg-ens33这个文件，效果如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">TYPE</span><span class="token operator">=</span>Ethernet
<span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span>none
<span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span>no
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static <span class="token comment">#注意设置为static静态</span>
<span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span>yes
<span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span>no
<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span>yes
<span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span>yes
<span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span>yes
<span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span>no
<span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span>stable-privacy
<span class="token assign-left variable">NAME</span><span class="token operator">=</span>ens33
<span class="token assign-left variable">UUID</span><span class="token operator">=</span>aa18fb34-fea8-4fff-83a4-1ebed631beff
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>ens33
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes <span class="token comment">#这里如果为no的话就改为yes，表示网卡设备自动启动</span>
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token number">192.168</span>.0.2 <span class="token comment">#这里的网关地址就是上一步获取到的那个网关地址</span>
<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.0.150 <span class="token comment">#再网关的范围内随意写</span>
<span class="token assign-left variable">NETMASK</span><span class="token operator">=</span><span class="token number">255.255</span>.255.0 <span class="token comment">#子网掩码</span>
<span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token number">8.8</span>.8.8 <span class="token comment">#DNS1这里用谷歌,</span>
<span class="token assign-left variable">DNS2</span><span class="token operator">=</span><span class="token number">223.6</span>.6.6 <span class="token comment">#DNS2用阿里</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>然后 :wq保存退出</p> <h4 id="第三步-刷新网卡配置"><a href="#第三步-刷新网卡配置" class="header-anchor">#</a> 第三步: 刷新网卡配置</h4> <p>CentOS 8 使用 : nmcli c reload</p> <p>CentOS7 使用 /etc/init.d/network restart</p> <p>如果不能上网直接使用<code>reboot</code> 命令重启</p> <h3 id="关闭防火墙"><a href="#关闭防火墙" class="header-anchor">#</a> 关闭防火墙</h3> <p>centos8</p> <h4 id="永久关闭防火墙"><a href="#永久关闭防火墙" class="header-anchor">#</a> 永久关闭防火墙</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ systemctl disable firewalld
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="查看防火墙"><a href="#查看防火墙" class="header-anchor">#</a> 查看防火墙</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ systemctl status firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="停止防火墙"><a href="#停止防火墙" class="header-anchor">#</a> 停止防火墙</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ systemctl stop firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="启用防火墙"><a href="#启用防火墙" class="header-anchor">#</a> 启用防火墙</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ systemctl start firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="配置jdk"><a href="#配置jdk" class="header-anchor">#</a> 配置JDK</h3> <h4 id="第一步-解压"><a href="#第一步-解压" class="header-anchor">#</a> 第一步：解压</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">tar</span> -zxvf /usr/local/software/jdk1.8.231 -C /usr/local/program/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="第二步-配置环境变量"><a href="#第二步-配置环境变量" class="header-anchor">#</a> 第二步：配置环境变量</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">vim</span> /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在最后添加java 环境配置</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/program/jdk1.8.231
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASS_PATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib.tools.jar
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="第三步-使配置生效"><a href="#第三步-使配置生效" class="header-anchor">#</a> 第三步：使配置生效</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">source</span> /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="配置ssh连接"><a href="#配置ssh连接" class="header-anchor">#</a> 配置SSH连接</h3> <h4 id="第一步-修改配置"><a href="#第一步-修改配置" class="header-anchor">#</a> 第一步：修改配置</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">vim</span> /etc/ssh/sshd_config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>打开 注释修改以下配置</p> <p>ClientAliveInterval 60</p> <p>表示每分钟发送一次, 然后客户端响应, 这样就保持长连接了</p> <p>ClientAliveCountMax 3</p> <p>ClientAliveCountMax表示服务器发出请求后客户端没有响应的次数达到一定值, 就自动断开</p> <h4 id="第二步-重启服务"><a href="#第二步-重启服务" class="header-anchor">#</a> 第二步：重启服务</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">service</span> sshd restart
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">tar</span> -zxvf /usr/local/software/hadoop-3.2.1.tar.gz  -C /usr/local/program/

<span class="token function">vim</span> /etc/profile

<span class="token comment">#hadoop 环境</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/usr/local/program/hadoop-3.2.1
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/sbin

<span class="token builtin class-name">source</span> /etc/profile

hadoop version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2023/3/21 17:48:43</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#hadoop是什么" class="sidebar-link reco-side-hadoop是什么" data-v-70334359>Hadoop是什么</a></li><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#hadoop发展史" class="sidebar-link reco-side-hadoop发展史" data-v-70334359>Hadoop发展史</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#lucene" class="sidebar-link reco-side-lucene" data-v-70334359>Lucene</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#论文" class="sidebar-link reco-side-论文" data-v-70334359>论文</a></li><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#hadoop三大发行版本" class="sidebar-link reco-side-hadoop三大发行版本" data-v-70334359>Hadoop三大发行版本</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#apache" class="sidebar-link reco-side-apache" data-v-70334359>Apache</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#cloudera" class="sidebar-link reco-side-cloudera" data-v-70334359>Cloudera</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#hortonworks" class="sidebar-link reco-side-hortonworks" data-v-70334359>Hortonworks</a></li><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#hadoop的优势-4高" class="sidebar-link reco-side-hadoop的优势-4高" data-v-70334359>Hadoop的优势（4高）</a></li><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#hadoop组成" class="sidebar-link reco-side-hadoop组成" data-v-70334359>Hadoop组成</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#_1-x-与2-x" class="sidebar-link reco-side-_1-x-与2-x" data-v-70334359>1.x 与2.x</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#hdfs架构概念" class="sidebar-link reco-side-hdfs架构概念" data-v-70334359>HDFS架构概念</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#yarn-架构概念" class="sidebar-link reco-side-yarn-架构概念" data-v-70334359>YARN 架构概念</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#mapreduce架构概述" class="sidebar-link reco-side-mapreduce架构概述" data-v-70334359>MapReduce架构概述</a></li><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#大数据计数生态体系" class="sidebar-link reco-side-大数据计数生态体系" data-v-70334359>大数据计数生态体系</a></li><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#环境搭建" class="sidebar-link reco-side-环境搭建" data-v-70334359>环境搭建</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#_1-准备虚拟机" class="sidebar-link reco-side-_1-准备虚拟机" data-v-70334359>1.准备虚拟机</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#_2-安装jdk" class="sidebar-link reco-side-_2-安装jdk" data-v-70334359>2.安装JDK</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#_3-安装hadoop" class="sidebar-link reco-side-_3-安装hadoop" data-v-70334359>3.安装Hadoop</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#_4-hadoop目录结构" class="sidebar-link reco-side-_4-hadoop目录结构" data-v-70334359>4.Hadoop目录结构</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#_5-hadoop官网手册" class="sidebar-link reco-side-_5-hadoop官网手册" data-v-70334359>5.Hadoop官网手册</a></li><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#hadoop运行模式" class="sidebar-link reco-side-hadoop运行模式" data-v-70334359>Hadoop运行模式</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#本地运行模式" class="sidebar-link reco-side-本地运行模式" data-v-70334359>本地运行模式</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#伪分布式运行模式" class="sidebar-link reco-side-伪分布式运行模式" data-v-70334359>伪分布式运行模式</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#完全分布式运行模式-开发重点" class="sidebar-link reco-side-完全分布式运行模式-开发重点" data-v-70334359>完全分布式运行模式（开发重点）</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#crontab定时任务设置" class="sidebar-link reco-side-crontab定时任务设置" data-v-70334359>crontab定时任务设置</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#集群时间同步" class="sidebar-link reco-side-集群时间同步" data-v-70334359>集群时间同步</a></li><li class="level-2" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#linux" class="sidebar-link reco-side-linux" data-v-70334359>Linux</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#配置静态ip" class="sidebar-link reco-side-配置静态ip" data-v-70334359>配置静态IP</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#关闭防火墙" class="sidebar-link reco-side-关闭防火墙" data-v-70334359>关闭防火墙</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#配置jdk" class="sidebar-link reco-side-配置jdk" data-v-70334359>配置JDK</a></li><li class="level-3" data-v-70334359><a href="/blog/docs/hadoop/Hadoop.html#配置ssh连接" class="sidebar-link reco-side-配置ssh连接" data-v-70334359>配置SSH连接</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="Sakura" data-v-017cf06a><canvas id="canvas_sakura" style="z-index:2;" data-v-017cf06a></canvas></div><canvas id="vuepress-canvas-ribbon"></canvas><div class="RibbonAnimation"></div><div id="goTop" class="hide-cat" data-v-bf92849a></div><div></div><canvas id="vuepress-canvas-ribbon"></canvas></div></div>
    <script src="/blog/assets/js/app.90949fa6.js" defer></script><script src="/blog/assets/js/6.046367ea.js" defer></script><script src="/blog/assets/js/1.cdc513ed.js" defer></script><script src="/blog/assets/js/7.f8aa44ea.js" defer></script>
  </body>
</html>
