(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{572:function(s,a,n){s.exports=n.p+"assets/img/2c2a64c5-a391-4389-afb3-58ff68e64e56.2d93ac9a.png"},573:function(s,a,n){s.exports=n.p+"assets/img/6cdd49b4-5d7b-4a51-81f9-9cf9ae09f412.e011f3ed.png"},574:function(s,a,n){s.exports=n.p+"assets/img/46374de1-ce5b-46f0-a9b2-ec546ae32117.60d75bf8.png"},575:function(s,a,n){s.exports=n.p+"assets/img/c5c6bf93-8e41-4527-9850-5bd88f711549.a17eae23.png"},576:function(s,a,n){s.exports=n.p+"assets/img/9f0c24fb-f026-42a8-8b15-d5294138f272.7d9d1595.png"},577:function(s,a,n){s.exports=n.p+"assets/img/f4c85eb5-7823-4629-9ae4-aa8ac542d0c5.59513360.png"},578:function(s,a,n){s.exports=n.p+"assets/img/fa964ef9-a288-428a-b054-2490e1fafbf9.e0bb03b5.png"},579:function(s,a,n){s.exports=n.p+"assets/img/3073be71-e000-4933-9804-c49a7dbe522c.4cf1fc3e.png"},580:function(s,a,n){s.exports=n.p+"assets/img/b2a6ad55-6b34-417b-a81f-747f6f2537a1.955d92a8.png"},581:function(s,a,n){s.exports=n.p+"assets/img/c0fd8c50-e6ea-4f16-bd8d-4d41172ee28c.0b16b1d7.png"},582:function(s,a,n){s.exports=n.p+"assets/img/d88198eb-5ded-4c56-bf1e-d6cf93721777.3a0a5991.png"},583:function(s,a,n){s.exports=n.p+"assets/img/8b60b443-5e9c-454c-a01b-2f513ad03d75.99722eb7.png"},584:function(s,a,n){s.exports=n.p+"assets/img/b606e799-98c3-48bb-b24e-ce8848350470.16e43813.png"},585:function(s,a,n){s.exports=n.p+"assets/img/31a3f053-8e26-4051-bfeb-086738dfd359.4a55fdc1.png"},586:function(s,a,n){s.exports=n.p+"assets/img/71bd7d5d-fa64-48a1-afbb-b02f54d27d8e.07f18e15.png"},587:function(s,a,n){s.exports=n.p+"assets/img/b87ece62-0890-4b27-88cc-bf9934d45d4c.4e71b40c.png"},588:function(s,a,n){s.exports=n.p+"assets/img/image-20200804074951055.1ffa9729.png"},589:function(s,a,n){s.exports=n.p+"assets/img/7e15f1b6-a10b-4bbf-a229-7ab9017fa3a0.3c05b382.png"},590:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230130398.cb887aa7.png"},591:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230203947.746c015a.png"},592:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230228873.7b031d79.png"},593:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230245660.b4cd3e44.png"},594:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230305586.ea4ac282.png"},595:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230326924.94746612.png"},596:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230351493.26778d77.png"},597:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230438720.f474d646.png"},598:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230456475.317ef208.png"},599:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230511853.8fced7f6.png"},600:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230535141.2416584f.png"},601:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230720325.6db1e4f7.png"},602:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230757400.6c4bee87.png"},603:function(s,a,n){s.exports=n.p+"assets/img/image-20200802230938107.dbc940c6.png"},604:function(s,a,n){s.exports=n.p+"assets/img/image-20200802231054144.0fbe8292.png"},605:function(s,a,n){s.exports=n.p+"assets/img/image-20200802231110593.29589f60.png"},784:function(s,a,n){"use strict";n.r(a);var e=n(5),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"文档的操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文档的操作"}},[s._v("#")]),s._v(" 文档的操作")]),s._v(" "),e("h3",{attrs:{id:"基本操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本操作"}},[s._v("#")]),s._v(" 基本操作")]),s._v(" "),e("h4",{attrs:{id:"添加文档数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加文档数据"}},[s._v("#")]),s._v(" 添加文档数据")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('PUT /wry/_doc/1\n{\n  "name":"wry",\n  "age":23,\n  "desc":"一顿操作猛如虎，一看工资2500",\n  "tags":["直男","IT","温暖"]\n}\n\nPUT /wry/_doc/2\n{\n  "name":"张三",\n  "age":23,\n  "desc":"法外狂徒",\n  "tags":["直男"]\n}\n\nPUT /wry/_doc/3\n{\n  "name":"老干妈",\n  "age":30,\n  "desc":"不知道怎么形容",\n  "tags":["靓女"]\n}\n\nPUT /wry/_doc/4\n{\n  "name":"张三SOS",\n  "age":60,\n  "desc":"SOS",\n  "tags":["SOS"]\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br")])]),e("p",[e("img",{attrs:{src:n(572),alt:""}})]),s._v(" "),e("p",[e("img",{attrs:{src:n(573),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"get-获取文档数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-获取文档数据"}},[s._v("#")]),s._v(" GET 获取文档数据")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("GET /wry/_doc/1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:n(574),alt:""}})]),s._v(" "),e("p",[e("strong",[e("code",[s._v("version")]),s._v(" 代表记录被修改的次数")])]),s._v(" "),e("h4",{attrs:{id:"更新文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新文档"}},[s._v("#")]),s._v(" 更新文档")]),s._v(" "),e("h5",{attrs:{id:"put-更新文档数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#put-更新文档数据"}},[s._v("#")]),s._v(" PUT 更新文档数据")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('PUT /wry/_doc/5\n{\n  "name":"李四",\n  "age":23,\n  "desc":"一顿操作猛如虎，一看工资2500",\n  "tags":["直男","IT","温暖"]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[e("img",{attrs:{src:n(575),alt:""}}),s._v(" "),e("strong",[e("code",[s._v("version")]),s._v(" 代表记录被修改的次数")])]),s._v(" "),e("p",[e("code",[s._v("PUT")]),s._v("请求修改数据，如果请求体修改时少写字段，会丢失。")]),s._v(" "),e("h5",{attrs:{id:"post-更新文档数据-推荐使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#post-更新文档数据-推荐使用"}},[s._v("#")]),s._v(" POST 更新文档数据 (推荐使用)")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('POST /wry/_doc/1/_update\n{\n  "doc": {\n    "age": 50\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("img",{attrs:{src:n(576),alt:""}}),s._v(" "),e("img",{attrs:{src:n(577),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"简单条件查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简单条件查询"}},[s._v("#")]),s._v(" 简单条件查询")]),s._v(" "),e("p",[s._v("查询name等于李四的数据：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("GET /wry/_doc/_search?q=name:李四\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:n(578),alt:""}})]),s._v(" "),e("p",[e("strong",[e("code",[s._v("_score")]),s._v(" 查询的匹配度越高分数越高")])]),s._v(" "),e("h3",{attrs:{id:"复杂操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#复杂操作"}},[s._v("#")]),s._v(" 复杂操作")]),s._v(" "),e("h4",{attrs:{id:"精确匹配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#精确匹配"}},[s._v("#")]),s._v(" 精确匹配")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query":{\n    "match":{\n      "name":"张三"\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("精确匹配文档内容 name是Key,张三是Value")]),s._v(" "),e("p",[e("img",{attrs:{src:n(579),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"字段过滤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字段过滤"}},[s._v("#")]),s._v(" 字段过滤")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query":{\n    "match": {\n      "name":"张三"\n    } \n  },\n  "_source":["name","age"]\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("使用"),e("code",[s._v("_source")]),s._v("选择需要查询的字段")]),s._v(" "),e("p",[e("img",{attrs:{src:n(580),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"字段排序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字段排序"}},[s._v("#")]),s._v(" 字段排序")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query": {\n    "match": {\n      "name": "张三"\n    }\n  },\n  "sort": [\n    {\n      "age":{\n        "order":"desc"\n      }\n    }\n  ]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("使用"),e("code",[s._v("sort")]),s._v("进行排序，指定字段和排序方式\n"),e("img",{attrs:{src:n(581),alt:""}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query": {\n    "match": {\n      "name": "张三"\n    }\n  },\n  "sort": [\n    {\n      "age":{\n        "order":"asc"\n      }\n    }\n  ]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[e("img",{attrs:{src:n(582),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"分页查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分页查询"}},[s._v("#")]),s._v(" 分页查询")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query": {\n    "match": {\n      "name": "张三"\n    }\n  },\n  "from":0,\n  "size":1\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[e("code",[s._v("form")]),s._v(" 从那条记录开始，"),e("code",[s._v("size")]),s._v(" 每页显示多少条记录")]),s._v(" "),e("p",[e("strong",[s._v("数据下标是从"),e("code",[s._v("0")]),s._v("开始")]),s._v(" "),e("img",{attrs:{src:n(583),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"布尔值查询-多条件匹配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#布尔值查询-多条件匹配"}},[s._v("#")]),s._v(" 布尔值查询 多条件匹配")]),s._v(" "),e("h4",{attrs:{id:"且条件查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#且条件查询"}},[s._v("#")]),s._v(" 且条件查询")]),s._v(" "),e("p",[e("code",[s._v("must")]),s._v(" (相当于MySQL中的"),e("code",[s._v("and")]),s._v(") 所有条件都要符合")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query": {\n    "bool": {\n      "must": [\n        {\n          "match": {\n            "name": "张三"\n          }\n        },\n        {\n          "match": {\n            "desc": "SOS"\n          }\n        }\n      ]\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[e("img",{attrs:{src:n(584),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"或条件查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#或条件查询"}},[s._v("#")]),s._v(" 或条件查询")]),s._v(" "),e("p",[e("code",[s._v("should")]),s._v(" (相当于MySQL中的"),e("code",[s._v("or")]),s._v(") 条件符合一个就可以")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query": {\n    "bool": {\n      "should": [\n        {\n          "match": {\n            "name": "张三"\n          }\n        },\n        {\n          "match": {\n            "desc": "SOS"\n          }\n        }\n      ]\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[e("img",{attrs:{src:n(585),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"不包含查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#不包含查询"}},[s._v("#")]),s._v(" 不包含查询")]),s._v(" "),e("p",[e("code",[s._v("must_not")]),s._v(" （相当于MySQL中的"),e("code",[s._v("not")]),s._v("）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query": {\n    "bool": {\n      "must_not": [\n        {\n          "match": {\n            "name": "张三"\n          }\n        },\n        {\n          "match": {\n            "desc": "SOS"\n          }\n        }\n      ]\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[e("img",{attrs:{src:n(586),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"过滤条件查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#过滤条件查询"}},[s._v("#")]),s._v(" 过滤条件查询")]),s._v(" "),e("p",[e("code",[s._v("gt")]),s._v(" 大于 （相当于MySQL中的"),e("code",[s._v(">")]),s._v("）"),e("br"),s._v(" "),e("code",[s._v("gte")]),s._v(" 大于等于 （相当于MySQL中的"),e("code",[s._v(">=")]),s._v("）"),e("br"),s._v(" "),e("code",[s._v("lt")]),s._v(" 小于 （相当于MySQL中的"),e("code",[s._v("<")]),s._v("）"),e("br"),s._v(" "),e("code",[s._v("lte")]),s._v(" 小于等于 （相当于MySQL中的"),e("code",[s._v("<=")]),s._v("）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n  "query": {\n    "bool": {\n      "must": [\n        {\n          "match": {\n            "name": "张三"\n          }\n        }\n      ],\n      "filter":{\n        "range":{\n          "age":{\n            "gt":10,\n            "lt":40\n          }\n        }\n      }\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("p",[e("img",{attrs:{src:n(587),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"短语匹配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#短语匹配"}},[s._v("#")]),s._v(" 短语匹配")]),s._v(" "),e("p",[s._v("就像用于全文搜索的的match查询一样，当你希望寻找"),e("code",[s._v("邻近的单词")]),s._v("时，"),e("code",[s._v("match_phrase")]),s._v("查询可以帮你达到目的。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_doc/_search\n{\n    "query": {\n        "match_phrase": {\n            "desc": "法外狂徒"\n        }\n    }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("img",{attrs:{src:n(588),alt:"image-20200804074951055"}})]),s._v(" "),e("p",[s._v("和"),e("code",[s._v("match")]),s._v("查询类似，"),e("code",[s._v("match_phrase")]),s._v("查询首先解析查询字符串来产生一个词条列表。然后会搜索所有的词条，但只保留包含了所有搜索词条的文档，并且词条的位置要邻接。")]),s._v(" "),e("h4",{attrs:{id:"匹配多个条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#匹配多个条件"}},[s._v("#")]),s._v(" 匹配多个条件")]),s._v(" "),e("p",[s._v("多个字段空格隔开即可，分数(匹配度)高的优先匹配")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_search\n{\n  "query": {\n    "match": {\n      "tags": "女 it"\n    }\n  }\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[e("img",{attrs:{src:n(589),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"精确查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#精确查询"}},[s._v("#")]),s._v(" 精确查询")]),s._v(" "),e("p",[s._v("因为上边我们的索引库没有指定字段类型所以我们重新准备个测试索引。")]),s._v(" "),e("h5",{attrs:{id:"创建测试索引库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建测试索引库"}},[s._v("#")]),s._v(" 创建测试索引库")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('PUT /testdb/\n{\n  "mappings": {\n    "properties": {\n      "name":{\n        "type": "text"\n      },\n      "desc":{\n        "type": "keyword"\n      }\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[e("img",{attrs:{src:n(590),alt:"image-20200802230130398"}})]),s._v(" "),e("h5",{attrs:{id:"准备测试文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备测试文档"}},[s._v("#")]),s._v(" 准备测试文档")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('PUT /testdb/_doc/1\n{\n  "name":"张三学习ElasticSearch",\n  "desc":"法外狂徒"\n}\n\nPUT /testdb/_doc/2\n{\n  "name":"张三学习ElasticSearch",\n  "desc":"逍遥的法外狂徒"\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[e("img",{attrs:{src:n(591),alt:"image-20200802230203947"}})]),s._v(" "),e("p",[s._v("在这里发现一个坑，就是再"),e("code",[s._v("创建索引")]),s._v("的时候是"),e("code",[s._v("不用写类型")]),s._v("的,但是在插入数据的时候"),e("code",[s._v("必须指定文档类型")]),s._v("。否则会"),e("code",[s._v("报错")]),s._v("。")]),s._v(" "),e("p",[e("strong",[s._v("错误演示")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(592),alt:"image-20200802230228873"}})]),s._v(" "),e("p",[e("strong",[s._v("我们重点说一下这里")])]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("两个类型：")]),e("br"),s._v(" "),e("code",[s._v("text")]),s._v("  会被分词器解析"),e("br"),s._v(" "),e("code",[s._v("keyword")]),s._v(" "),e("strong",[s._v("不会")]),s._v("被分词器解析")])]),s._v(" "),e("p",[s._v("使用分词器查询，类型为"),e("code",[s._v("keyword")]),s._v(",不会被分词器解析")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET _analyze\n{\n  "analyzer": "keyword",\n  "text": "张三学习ElasticSearch"\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("img",{attrs:{src:n(593),alt:"image-20200802230245660"}})]),s._v(" "),e("p",[s._v("使用分词器查询，类型为标准"),e("code",[s._v("standard")]),s._v(",可以看到被分词器拆分了")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET _analyze\n{\n  "analyzer": "standard",\n  "text": "张三学习ElasticSearch"\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("img",{attrs:{src:n(594),alt:"image-20200802230305586"}})]),s._v(" "),e("p",[e("code",[s._v("name")]),s._v("属性是"),e("code",[s._v("text")]),s._v('类型，会被分词器进行解析处理成  【"张","三","学","习","ElasticSearch"】,'),e("br"),s._v("\n所以查询的时候只有输入以上被解析后的结果才能匹配到值进行输出。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /testdb/_search\n{\n  "query": {\n    "term": {\n      "name": "三"\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("img",{attrs:{src:n(595),alt:"image-20200802230326924"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /testdb/_search\n{\n  "query": {\n    "term": {\n      "name": "张"\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("img",{attrs:{src:n(596),alt:"image-20200802230351493"}})]),s._v(" "),e("p",[s._v("输入"),e("code",[s._v("不是被解析的结果")]),s._v("进行查询，"),e("code",[s._v("匹配不到输出结果")]),s._v("。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /testdb/_search\n{\n  "query": {\n    "term": {\n      "name": "学习"\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("img",{attrs:{src:n(597),alt:"image-20200802230438720"}})]),s._v(" "),e("p",[e("code",[s._v("desc")]),s._v("属性是"),e("code",[s._v("keyword")]),s._v("类型，不会被分词器进行解析。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /testdb/_search\n{\n  "query": {\n    "term": {\n      "desc": "法外狂徒"\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("输入 "),e("code",[s._v("法外狂徒")]),s._v(" 他会完全匹配，才能输出结果\n"),e("img",{attrs:{src:n(598),alt:"image-20200802230456475"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /testdb/_search\n{\n  "query": {\n    "term": {\n      "desc": "逍遥的法外狂徒"\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("img",{attrs:{src:n(599),alt:"image-20200802230511853"}})]),s._v(" "),e("p",[e("code",[s._v("term")]),s._v("查询是直接通过"),e("strong",[s._v("倒排索引")]),s._v("指定的词条进行"),e("strong",[s._v("精确查询")]),s._v("的。")]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("关于分词：")]),e("br"),s._v(" "),e("code",[s._v("term")]),s._v(" 直接精确查询 （效率高）"),e("br"),s._v(" "),e("code",[s._v("match")]),s._v(" 会使用分词器解析(先分析文档，然后再通过分析的文档进行查询。)")])]),s._v(" "),e("h4",{attrs:{id:"多个值匹配的精确查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多个值匹配的精确查询"}},[s._v("#")]),s._v(" 多个值匹配的精确查询")]),s._v(" "),e("p",[s._v("准备数据")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('PUT /testdb/_doc/3\n{\n  "t1":"22",\n  "t2":"2020-07-31"\n}\n\nPUT /testdb/_doc/4\n{\n  "t1":"22",\n  "t2":"2020-05-31"\n}\n\nPUT /testdb/_doc/5\n{\n  "t1":"33",\n  "t2":"2020-05-31"\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[e("img",{attrs:{src:n(600),alt:"image-20200802230535141"}})]),s._v(" "),e("p",[s._v("是不是在想"),e("code",[s._v("testdb索引")]),s._v("中没有"),e("code",[s._v("t1")]),s._v("和"),e("code",[s._v("t2")]),s._v("两个字段，\n这样写会"),e("code",[s._v("动态新增")]),s._v("2个字段的")]),s._v(" "),e("p",[e("img",{attrs:{src:n(601),alt:"image-20200802230720325"}})]),s._v(" "),e("p",[s._v("并且"),e("code",[s._v("默认指定了类型")]),s._v("， "),e("code",[s._v("t1")]),s._v("是"),e("code",[s._v("text")]),s._v("类型，"),e("code",[s._v("t2")]),s._v("是"),e("code",[s._v("date")]),s._v("类型。\n"),e("img",{attrs:{src:n(602),alt:"image-20200802230757400"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /testdb/_search\n{\n  "query": {\n    "bool": {\n      "should": [\n        {\n          "term": {\n            "t1": {\n              "value": "33"\n            }\n          }\n        },\n        {\n          "term": {\n            "t2": {\n              "value": "2020-05-31"\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("p",[e("img",{attrs:{src:n(603),alt:"image-20200802230938107"}})]),s._v(" "),e("h4",{attrs:{id:"高亮查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#高亮查询"}},[s._v("#")]),s._v(" 高亮查询")]),s._v(" "),e("p",[s._v("使用以前的库进行查询")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_search\n{\n  "query": {\n    "match": {\n      "name": "张三"\n    }\n  },\n  "highlight": {\n    "fields": {\n      "name": {}\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("高亮关键字被加了"),e("code",[s._v("<em></em>")]),s._v(" 标签")]),s._v(" "),e("p",[e("img",{attrs:{src:n(604),alt:"image-20200802231054144"}})]),s._v(" "),e("p",[s._v("如果我们不想使用默认的，我们可以自己定义标签")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('GET /wry/_search\n{\n  "query": {\n    "match": {\n      "name": "张三"\n    }\n  },\n  "highlight": {\n    "pre_tags": "<p class=\'key\' style=\'color:red\'>", \n    "post_tags": "</p>", \n    "fields": {\n      "name": {}\n    }\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[e("img",{attrs:{src:n(605),alt:"image-20200802231110593"}})]),s._v(" "),e("h1",{attrs:{id:""}},[e("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])])])}),[],!1,null,null,null);a.default=t.exports}}]);