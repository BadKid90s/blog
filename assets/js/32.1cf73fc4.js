(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{781:function(s,a,t){"use strict";t.r(a);var e=t(5),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"保留字介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保留字介绍"}},[s._v("#")]),s._v(" 保留字介绍")]),s._v(" "),t("h2",{attrs:{id:"from"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#from"}},[s._v("#")]),s._v(" FROM")]),s._v(" "),t("p",[s._v("基础镜像，当前镜像是基于那个镜像创建的")]),s._v(" "),t("h2",{attrs:{id:"maintainer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#maintainer"}},[s._v("#")]),s._v(" MAINTAINER")]),s._v(" "),t("p",[s._v("镜像作者加邮箱")]),s._v(" "),t("h2",{attrs:{id:"run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run"}},[s._v("#")]),s._v(" RUN")]),s._v(" "),t("p",[s._v("构建镜像时执行的命令")]),s._v(" "),t("h2",{attrs:{id:"expose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expose"}},[s._v("#")]),s._v(" EXPOSE")]),s._v(" "),t("p",[s._v("镜像暴露的端口")]),s._v(" "),t("h2",{attrs:{id:"workdir"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#workdir"}},[s._v("#")]),s._v(" WORKDIR")]),s._v(" "),t("p",[s._v("指定容器创建后，终端默认登陆进来的工作目录，一个落脚点")]),s._v(" "),t("h2",{attrs:{id:"env-key-value"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#env-key-value"}},[s._v("#")]),s._v(" ENV (key value)")]),s._v(" "),t("p",[s._v("构建镜像中设置环境变量(键值对)")]),s._v(" "),t("h2",{attrs:{id:"add"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#add"}},[s._v("#")]),s._v(" ADD")]),s._v(" "),t("p",[s._v("添加并解压缩")]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" 源路径 目标路径 ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("COPY")]),s._v(" "),t("h2",{attrs:{id:"添加并解压缩"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加并解压缩"}},[s._v("#")]),s._v(" 添加并解压缩")]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" 源路径 目标路径 ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"volume"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#volume"}},[s._v("#")]),s._v(" VOLUME")]),s._v(" "),t("p",[s._v("容器卷，用于数据保存和持久化工作")]),s._v(" "),t("h2",{attrs:{id:"cmd-exec-shell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cmd-exec-shell"}},[s._v("#")]),s._v(" CMD (exec/shell)")]),s._v(" "),t("p",[s._v("指定容器启动时的命令，一个容器可有多个cmd 命令，但只有最后一个生效,CMD 会被docker run 的参数替换")]),s._v(" "),t("h2",{attrs:{id:"entrypoint-xxx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#entrypoint-xxx"}},[s._v("#")]),s._v(" ENTRYPOINT XXX")]),s._v(" "),t("p",[s._v("指定容器启动时的命令，追加 docker run 的参数")]),s._v(" "),t("h2",{attrs:{id:"onbuild-xxx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#onbuild-xxx"}},[s._v("#")]),s._v(" ONBUILD XXX")]),s._v(" "),t("p",[s._v("当构建一个被继承的Dockerfile 时运行命令，父镜像在被子镜像继承后，父镜像的ONBUILD 被触发")]),s._v(" "),t("h1",{attrs:{id:"案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[s._v("#")]),s._v(" 案例")]),s._v(" "),t("h2",{attrs:{id:"自定义mycentos-镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义mycentos-镜像"}},[s._v("#")]),s._v(" 自定义mycentos 镜像")]),s._v(" "),t("p",[s._v("自定义mycentos 镜像让其具备以下功能：")]),s._v(" "),t("ul",[t("li",[s._v("登陆后的默认lujing")]),s._v(" "),t("li",[s._v("vim 编辑器")]),s._v(" "),t("li",[s._v("查看网络配置 ipconfig")])]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" centos")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" Mr.Wang<wry10150@outlook.com>")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" mypath /temp")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mypath")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" yum -y install vim")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" yum -y install net-tools")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 80")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" /bin/bash")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);